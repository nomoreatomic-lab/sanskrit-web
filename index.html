<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Sanskrit Spinner KBC Quiz</title>

<style>
body{text-align:center;font-family:sans-serif;background:#eef2ff;}
h1{color:#1a237e;}

#wheelBox{width:320px;height:320px;margin:25px auto;position:relative;}
#wheel{
 width:100%;height:100%;border-radius:50%;
 background:conic-gradient(
 #ffcc80 0deg 45deg,#ffab91 45deg 90deg,
 #ce93d8 90deg 135deg,#90caf9 135deg 180deg,
 #a5d6a7 180deg 225deg,#fff59d 225deg 270deg,
 #ef9a9a 270deg 315deg,#b39ddb 315deg 360deg);
 border:8px solid #333;cursor:grab;
 transition:transform 2.5s ease-out;
}
#pointer{
 position:absolute;top:-15px;left:50%;
 transform:translateX(-50%);
 border-left:15px solid transparent;
 border-right:15px solid transparent;
 border-bottom:30px solid red;
}

#timer{font-size:18px;font-weight:bold;color:#c62828;margin:10px;}

.option{
 background:#fff;padding:10px;margin:8px auto;width:260px;
 border-radius:6px;border:2px solid #ccc;cursor:pointer;
}
.option.correct{background:#c8e6c9;border-color:green;}
.option.wrong{background:#ffcdd2;border-color:red;}
.option.disabled{opacity:0.5;pointer-events:none;}

.correctText{color:green;font-weight:bold;}
.wrongText{color:red;font-weight:bold;}
button{padding:8px 12px;margin:5px;}
</style>
</head>

<body>

<h1>ЁЯУЪ рд╕рдВрд╕реНрдХреГрдд тАУ KBC Quiz</h1>

<div id="wheelBox">
 <div id="pointer"></div>
 <div id="wheel"></div>
</div>

<div id="timer">тП│ Time: 60s</div>
<div id="question"></div>
<div id="options"></div>
<div id="result"></div>

<button onclick="useHelp()">тШО Help</button>
<button onclick="useFifty()">50-50</button>
<button onclick="showAnswer()">Show Answer</button>
<button onclick="showTable()">ЁЯУШ Table Dekho</button>

<!-- SOUNDS -->
<audio id="spinSound">
 <source src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg">
</audio>
<audio id="correctSound">
 <source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg">
</audio>
<audio id="buzzer">
 <source src="https://actions.google.com/sounds/v1/alarms/buzzer.ogg">
</audio>

<!-- TABLE POPUP -->
<div id="tablePopup" style="display:none;position:fixed;top:0;left:0;
width:100%;height:100%;background:rgba(0,0,0,.5);z-index:999;">
 <div style="background:#fff;margin:40px auto;width:95%;
 max-width:600px;padding:15px;border-radius:10px;">
  <h3 id="popupTitle"></h3>
  <table border="1" width="100%" style="border-collapse:collapse;">
   <tr>
    <th>рд╡рд┐рднрдХреНрддрд┐</th><th>рдПрдХрд╡рдЪрди</th><th>рджреНрд╡рд┐рд╡рдЪрди</th><th>рдмрд╣реБрд╡рдЪрди</th>
   </tr>
   <tbody id="tableBody"></tbody>
  </table><br>
  <button onclick="closeTable()">тЭМ Close</button>
 </div>
</div>

<script>
const wheel=document.getElementById("wheel");
const spinSound=document.getElementById("spinSound");
const correctSound=document.getElementById("correctSound");
const buzzer=document.getElementById("buzzer");

const questionDiv=document.getElementById("question");
const optionsDiv=document.getElementById("options");
const resultDiv=document.getElementById("result");
const timerDiv=document.getElementById("timer");

let rotation=0,currentWord="",currentVib="",currentVac="",correctAnswer="";
let answered=false,timeLeft=60,timerInterval;

const vibhakti=["рдкреНрд░рдердорд╛","рджреНрд╡рд┐рддреАрдпрд╛","рддреГрддреАрдпрд╛","рдЪрддреБрд░реНрдереА","рдкрдВрдЪрдореА","рд╖рд╖реНрдареА","рд╕рдкреНрддрдореА","рд╕рдВрдмреЛрдзрди"];
const vacan=["рдПрдХрд╡рдЪрди","рджреНрд╡рд┐рд╡рдЪрди","рдмрд╣реБрд╡рдЪрди"];
const shabd=["рд░рд╛рдо рд╢рдмреНрдж","рднрд╛рдиреБ рд╢рдмреНрдж","рдореБрдирд┐ рд╢рдмреНрдж"];

/* FULL TABLE */
const fullTable={
 "рд░рд╛рдо рд╢рдмреНрдж":{
  "рдкреНрд░рдердорд╛":["рд░рд╛рдордГ","рд░рд╛рдореМ","рд░рд╛рдорд╛рдГ"],
  "рджреНрд╡рд┐рддреАрдпрд╛":["рд░рд╛рдордореН","рд░рд╛рдореМ","рд░рд╛рдорд╛рдиреН"],
  "рддреГрддреАрдпрд╛":["рд░рд╛рдореЗрдг","рд░рд╛рдорд╛рднреНрдпрд╛рдореН","рд░рд╛рдореИрдГ"],
  "рдЪрддреБрд░реНрдереА":["рд░рд╛рдорд╛рдп","рд░рд╛рдорд╛рднреНрдпрд╛рдореН","рд░рд╛рдореЗрднреНрдпрдГ"],
  "рдкрдВрдЪрдореА":["рд░рд╛рдорд╛рддреН","рд░рд╛рдорд╛рднреНрдпрд╛рдореН","рд░рд╛рдореЗрднреНрдпрдГ"],
  "рд╖рд╖реНрдареА":["рд░рд╛рдорд╕реНрдп","рд░рд╛рдордпреЛрдГ","рд░рд╛рдорд╛рдгрд╛рдореН"],
  "рд╕рдкреНрддрдореА":["рд░рд╛рдореЗ","рд░рд╛рдордпреЛрдГ","рд░рд╛рдореЗрд╖реБ"],
  "рд╕рдВрдмреЛрдзрди":["рд╣реЗ рд░рд╛рдо","рд╣реЗ рд░рд╛рдореМ","рд╣реЗ рд░рд╛рдорд╛рдГ"]
 },
 "рднрд╛рдиреБ рд╢рдмреНрдж":{
  "рдкреНрд░рдердорд╛":["рднрд╛рдиреБрдГ","рднрд╛рдиреВ","рднрд╛рдирд╡рдГ"],
  "рджреНрд╡рд┐рддреАрдпрд╛":["рднрд╛рдиреБрдореН","рднрд╛рдиреВ","рднрд╛рдиреВрдиреН"],
  "рддреГрддреАрдпрд╛":["рднрд╛рдиреБрдирд╛","рднрд╛рдиреБрднреНрдпрд╛рдореН","рднрд╛рдиреБрднрд┐рдГ"],
  "рдЪрддреБрд░реНрдереА":["рднрд╛рдирд╡реЗ","рднрд╛рдиреБрднреНрдпрд╛рдореН","рднрд╛рдиреБрднреНрдпрдГ"],
  "рдкрдВрдЪрдореА":["рднрд╛рдиреЛрдГ","рднрд╛рдиреБрднреНрдпрд╛рдореН","рднрд╛рдиреБрднреНрдпрдГ"],
  "рд╖рд╖реНрдареА":["рднрд╛рдиреЛрдГ","рднрд╛рдиреНрд╡реЛрдГ","рднрд╛рдиреВрдирд╛рдореН"],
  "рд╕рдкреНрддрдореА":["рднрд╛рдиреМ","рднрд╛рдиреНрд╡реЛрдГ","рднрд╛рдиреБрд╖реБ"],
  "рд╕рдВрдмреЛрдзрди":["рд╣реЗ рднрд╛рдиреЛ","рд╣реЗ рднрд╛рдиреВ","рд╣реЗ рднрд╛рдирд╡рдГ"]
 },
 "рдореБрдирд┐ рд╢рдмреНрдж":{
  "рдкреНрд░рдердорд╛":["рдореБрдирд┐рдГ","рдореБрдиреА","рдореБрдирдпрдГ"],
  "рджреНрд╡рд┐рддреАрдпрд╛":["рдореБрдирд┐рдореН","рдореБрдиреА","рдореБрдиреАрдиреН"],
  "рддреГрддреАрдпрд╛":["рдореБрдирд┐рдирд╛","рдореБрдирд┐рднреНрдпрд╛рдореН","рдореБрдирд┐рднрд┐рдГ"],
  "рдЪрддреБрд░реНрдереА":["рдореБрдирдпреЗ","рдореБрдирд┐рднреНрдпрд╛рдореН","рдореБрдирд┐рднреНрдпрдГ"],
  "рдкрдВрдЪрдореА":["рдореБрдиреЗрдГ","рдореБрдирд┐рднреНрдпрд╛рдореН","рдореБрдирд┐рднреНрдпрдГ"],
  "рд╖рд╖реНрдареА":["рдореБрдиреЗрдГ","рдореБрдиреНрдпреЛрдГ","рдореБрдиреАрдирд╛рдореН"],
  "рд╕рдкреНрддрдореА":["рдореБрдиреМ","рдореБрдиреНрдпреЛрдГ","рдореБрдирд┐рд╖реБ"],
  "рд╕рдВрдмреЛрдзрди":["рд╣реЗ рдореБрдиреЗ","рд╣реЗ рдореБрдиреА","рд╣реЗ рдореБрдирдпрдГ"]
 }
};

/* SPIN */
wheel.onclick=()=>{
 spinSound.currentTime=0; spinSound.play();
 rotation+=Math.random()*360+720;
 wheel.style.transform=`rotate(${rotation}deg)`;
 setTimeout(makeQuestion,2500);
};

/* QUESTION */
function makeQuestion(){
 answered=false; optionsDiv.innerHTML=""; resultDiv.innerHTML="";
 currentVib=vibhakti[Math.floor(((rotation%360+360)%360)/45)];
 currentWord=shabd[Math.floor(Math.random()*shabd.length)];
 currentVac=vacan[Math.floor(Math.random()*vacan.length)];

 let index=vacan.indexOf(currentVac);
 correctAnswer=fullTable[currentWord][currentVib][index];

 questionDiv.innerHTML=
 `тЭУ ${currentWord} тАУ <b>${currentVib} (${currentVac})</b> рдХрд╛ рд╕рд╣реА рд░реВрдк рдЪреБрдирд┐рдП`;

 let opts=[correctAnswer];
 let allForms=[];
 for(let v in fullTable[currentWord]){
  allForms=allForms.concat(fullTable[currentWord][v]);
 }

 while(opts.length<4){
  let x=allForms[Math.floor(Math.random()*allForms.length)];
  if(!opts.includes(x)) opts.push(x);
 }
 opts.sort(()=>Math.random()-0.5);

 opts.forEach(o=>{
  let d=document.createElement("div");
  d.className="option"; d.innerText=o;
  d.onclick=()=>checkAnswer(d,o);
  optionsDiv.appendChild(d);
 });

 startTimer();
}

/* CHECK */
function checkAnswer(div,sel){
 if(answered) return;
 answered=true; clearInterval(timerInterval);
 document.querySelectorAll(".option").forEach(o=>o.classList.add("disabled"));
 if(sel===correctAnswer){
  div.classList.add("correct");
  resultDiv.innerHTML="ЁЯОЙ рдмрд┐рд▓реНрдХреБрд▓ рд╕рд╣реА рдЙрддреНрддрд░!";
  resultDiv.className="correctText";
  correctSound.currentTime=0; correctSound.play();
 }else{
  div.classList.add("wrong");
  resultDiv.innerHTML="тЭМ рдЧрд▓рдд рдЙрддреНрддрд░";
  resultDiv.className="wrongText";
  buzzer.currentTime=0; buzzer.play();
 }
}

/* TIMER */
function startTimer(){
 clearInterval(timerInterval); timeLeft=60;
 timerDiv.innerText="тП│ Time: 60s";
 timerInterval=setInterval(()=>{
  timeLeft--; timerDiv.innerText="тП│ Time: "+timeLeft+"s";
  if(timeLeft<=0){
   clearInterval(timerInterval);
   buzzer.play();
  }
 },1000);
}

/* EXTRA */
function showAnswer(){
 resultDiv.innerHTML=`тЬФ рд╕рд╣реА рдЙрддреНрддрд░: <b>${correctAnswer}</b>`;
 resultDiv.className="correctText";
}
function useHelp(){alert("рджреЛрд╕реНрдд рд╕реЗ рдкреВрдЫрд┐рдП ЁЯЩВ");}
function useFifty(){
 let r=0;
 document.querySelectorAll(".option").forEach(o=>{
  if(o.innerText!==correctAnswer && r<2){
   o.classList.add("disabled"); r++;
  }
 });
}
function showTable(){
 let tb="";
 for(let v of vibhakti){
  let r=fullTable[currentWord][v];
  tb+=`<tr><td>${v}</td><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td></tr>`;
 }
 document.getElementById("popupTitle").innerText=currentWord+" тАУ рд╡рд┐рднрдХреНрддрд┐ рддрд╛рд▓рд┐рдХрд╛";
 document.getElementById("tableBody").innerHTML=tb;
 document.getElementById("tablePopup").style.display="block";
}
function closeTable(){
 document.getElementById("tablePopup").style.display="none";
}
</script>

</body>
</html>